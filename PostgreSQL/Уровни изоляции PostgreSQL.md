# Уровни изоляции PostgreSQL

| №  | Уровень             | Область видимости снимка данных | Описание
| :- | :------------------ | :-------------------------------| :-------
| 1  | ~~Read uncommited~~ | Строка таблицы | Можно увидеть изменения незавершённых транзакций.<br /> Уровень отсутствует в PostgreSQL.
| 2  | Read commited       | Запрос         | Можно увидеть изменения только завершённых транзакций
| 3  | Repeatable read     | Транзакция     | То, что прочитано однажды, будет прочитано ещё раз
| 4  | Serializable        | Транзакция + предикатные блокировки | Полная иллюзия последовательного выполнения, в частности, отсутствие неожиданно появляющихся строк

# Примеры ошибок read commited

<table>
  <tr>
    <th>Проблема</th>
    <th>Причина</th>
    <th>Решение</th>
  </tr>
  <tr>
    <td>Комментарии к посту. Иногда при добавлении комментария возникает нарушение внешнего ключа.</td>
    <td>Пост был удален после начала транзакции, добавляющей комментарий.</td>
    <td>Варианты:

1. Блокировать пост (for share/for update)
1. Поставить нужный уровень изоляции
    </td>
  </tr>
  <tr>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td></td>
    <td></td>
    <td></td>
  </tr>
</table>

|  |  | 
